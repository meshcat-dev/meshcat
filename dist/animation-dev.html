<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>MeshCat</title>
	</head>
	<body>
        <div id="meshcat-pane">
        </div>

        <script src="main.js"></script>
        <script>

            var scene_json = {"metadata":{"version":4.5,"type":"Object","generator":"Object3D.toJSON"},"geometries":[{"uuid":"F00197C6-9B9F-475C-88F4-F18C046A0D7F","type":"BufferGeometry","data":{"attributes":{"position":{"itemSize":3,"type":"Float32Array","array":[-10,0,-10,10,0,-10,-10,0,-10,-10,0,10,-10,0,-9.5,10,0,-9.5,-9.5,0,-10,-9.5,0,10,-10,0,-9,10,0,-9,-9,0,-10,-9,0,10,-10,0,-8.5,10,0,-8.5,-8.5,0,-10,-8.5,0,10,-10,0,-8,10,0,-8,-8,0,-10,-8,0,10,-10,0,-7.5,10,0,-7.5,-7.5,0,-10,-7.5,0,10,-10,0,-7,10,0,-7,-7,0,-10,-7,0,10,-10,0,-6.5,10,0,-6.5,-6.5,0,-10,-6.5,0,10,-10,0,-6,10,0,-6,-6,0,-10,-6,0,10,-10,0,-5.5,10,0,-5.5,-5.5,0,-10,-5.5,0,10,-10,0,-5,10,0,-5,-5,0,-10,-5,0,10,-10,0,-4.5,10,0,-4.5,-4.5,0,-10,-4.5,0,10,-10,0,-4,10,0,-4,-4,0,-10,-4,0,10,-10,0,-3.5,10,0,-3.5,-3.5,0,-10,-3.5,0,10,-10,0,-3,10,0,-3,-3,0,-10,-3,0,10,-10,0,-2.5,10,0,-2.5,-2.5,0,-10,-2.5,0,10,-10,0,-2,10,0,-2,-2,0,-10,-2,0,10,-10,0,-1.5,10,0,-1.5,-1.5,0,-10,-1.5,0,10,-10,0,-1,10,0,-1,-1,0,-10,-1,0,10,-10,0,-0.5,10,0,-0.5,-0.5,0,-10,-0.5,0,10,-10,0,0,10,0,0,0,0,-10,0,0,10,-10,0,0.5,10,0,0.5,0.5,0,-10,0.5,0,10,-10,0,1,10,0,1,1,0,-10,1,0,10,-10,0,1.5,10,0,1.5,1.5,0,-10,1.5,0,10,-10,0,2,10,0,2,2,0,-10,2,0,10,-10,0,2.5,10,0,2.5,2.5,0,-10,2.5,0,10,-10,0,3,10,0,3,3,0,-10,3,0,10,-10,0,3.5,10,0,3.5,3.5,0,-10,3.5,0,10,-10,0,4,10,0,4,4,0,-10,4,0,10,-10,0,4.5,10,0,4.5,4.5,0,-10,4.5,0,10,-10,0,5,10,0,5,5,0,-10,5,0,10,-10,0,5.5,10,0,5.5,5.5,0,-10,5.5,0,10,-10,0,6,10,0,6,6,0,-10,6,0,10,-10,0,6.5,10,0,6.5,6.5,0,-10,6.5,0,10,-10,0,7,10,0,7,7,0,-10,7,0,10,-10,0,7.5,10,0,7.5,7.5,0,-10,7.5,0,10,-10,0,8,10,0,8,8,0,-10,8,0,10,-10,0,8.5,10,0,8.5,8.5,0,-10,8.5,0,10,-10,0,9,10,0,9,9,0,-10,9,0,10,-10,0,9.5,10,0,9.5,9.5,0,-10,9.5,0,10,-10,0,10,10,0,10,10,0,-10,10,0,10],"normalized":false},"color":{"itemSize":3,"type":"Float32Array","array":[0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.2666666805744171,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342,0.5333333611488342],"normalized":false}},"boundingSphere":{"center":[0,0,0],"radius":14.142135623730951}}},{"uuid":"3C839FA7-7D54-41F7-B30A-0AB7875E78F9","type":"BufferGeometry","data":{"attributes":{"position":{"itemSize":3,"type":"Float32Array","array":[0,0,0,0.5,0,0,0,0,0,0,0.5,0,0,0,0,0,0,0.5],"normalized":false},"color":{"itemSize":3,"type":"Float32Array","array":[1,0,0,1,0.6000000238418579,0,0,1,0,0.6000000238418579,1,0,0,0,1,0,0.6000000238418579,1],"normalized":false}},"boundingSphere":{"center":[0.25,0.25,0.25],"radius":0.4330127018922193}}},{"uuid":"688cba36-120a-11e8-1a9d-0367a991b8a9","type":"BoxGeometry","width":0.1,"height":0.2,"depth":0.3}],

                // "animations": [{
                //     "type": "vector3",
                //     "keys": [{
                //         "time": 0,
                //         "value": [-2e-06,-6.71175,3.01972]
                //     },{
                //         "time": 5,
                //         "value": [-2e-06,-6.71175,3.01972]
                //     },{
                //         "time": 70,
                //         "value": [-2e-06,-6.52962,-38.1906]
                //     },{
                //         "time": 80,
                //         "value": [-2e-06,-6.52962,-38.1906]
                //     },{
                //         "time": 145,
                //         "value": [-2e-06,-6.71175,3.01972]
                //     }],
                //     "name": "cylinder003.position"
                // }],

            "materials":[{"uuid":"C6134141-28E6-4C81-9952-FE6282BD91CC","type":"LineBasicMaterial","color":16777215,"vertexColors":2,"depthFunc":3,"depthTest":true,"depthWrite":true},{"uuid":"37322D07-0AE9-459D-8ED1-C531059E8F0A","type":"LineBasicMaterial","color":16777215,"vertexColors":2,"depthFunc":3,"depthTest":true,"depthWrite":true},{"uuid":"688cba7c-120a-11e8-1ccd-dbbc48084379","type":"MeshLambertMaterial","color":16777215,"emissive":0,"depthFunc":3,"depthTest":true,"depthWrite":true}],"object":{"uuid":"AE3F39DC-1E7E-4EE6-A60F-B4C36F7EE7CA","type":"Scene","name":"Scene","matrix":[1,0,0,0,0,2.220446049250313e-16,-1,0,0,1,2.220446049250313e-16,0,0,0,0,1],"children":[{"uuid":"621A4A0B-F05D-4F87-B275-D84BDEC4555F","type":"Group","name":"Lights","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"children":[{"uuid":"9001C5AF-00ED-42A0-B99F-F7AB6A8C158F","type":"DirectionalLight","name":"DirectionalLight","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,1,5,10,1],"color":16777215,"intensity":0.5,"shadow":{"camera":{"uuid":"838A7B26-779F-4790-96E5-D5A8491196C7","type":"OrthographicCamera","zoom":1,"left":-5,"right":5,"top":5,"bottom":-5,"near":0.5,"far":500}}},{"uuid":"5285C3E1-D8E4-44B6-A1B4-79FDD53ABCD1","type":"AmbientLight","name":"AmbientLight","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"color":16777215,"intensity":0.3}]},{"uuid":"97F5751B-CD47-4702-9332-ECF2918AFAF9","type":"LineSegments","name":"Grid","matrix":[1,0,0,0,0,2.220446049250313e-16,1,0,0,-1,2.220446049250313e-16,0,0,0,0,1],"geometry":"F00197C6-9B9F-475C-88F4-F18C046A0D7F","material":"C6134141-28E6-4C81-9952-FE6282BD91CC"},{"uuid":"8B6F33B2-021E-40AD-B47D-BF3259373786","type":"LineSegments","name":"Axes","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"geometry":"3C839FA7-7D54-41F7-B30A-0AB7875E78F9","material":"37322D07-0AE9-459D-8ED1-C531059E8F0A"},{"uuid":"0876A211-CF4E-4DF0-93CB-0FE1B03CAB47","type":"Object3D","name":"foo","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],"children":[{"uuid":"0C4D84EE-5826-436C-8329-B4F68876FC70","type":"Object3D","name":"bar","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,1,0,0,1],"children":[{"uuid":"688cb6b2-120a-11e8-32d3-49ba11c3bb93","type":"Mesh","name":"<object>","matrix":[1,0,0,0,0,1,0,0,0,0,1,0,0.05,0.1,0.15,1],"geometry":"688cba36-120a-11e8-1a9d-0367a991b8a9","material":"688cba7c-120a-11e8-1ccd-dbbc48084379"}]}]}]}}

            var viewer = new MeshCat.Viewer(document.getElementById("meshcat-pane"), false);
            // viewer.connect();

            var loader = new MeshCat.THREE.ObjectLoader();

            var animations = [
                {
                    "path": ["Cameras", "default"],
                    "clip": {
                        "fps": 30,
                        "name": "default",
                        "tracks": [{
                            "type": "vector3",
                            "keys": [{
                                "time": 0,
                                "value": [0, 1, .3]
                            },{
                                "time": 5,
                                "value": [0, 1, .3]
                            },{
                                "time": 70,
                                "value": [0, 1, 2]
                            },{
                                "time": 80,
                                "value": [0, 1, 2]
                            },{
                                "time": 145,
                                "value": [0, 1, 0.3]
                            },{
                                "time": 150,
                                "value": [0, 1, 0.3]
                            }],
                            "name": ".position"
                        }]
                    }
                },
                {
                    "path": ["foo", "bar"],
                    "clip": {
                        "fps": 30,
                        "name": "default",
                        "tracks": [{
                            "type": "vector3",
                            "keys": [{
                                "time": 0,
                                "value": [0, 1, 0]
                            },{
                                "time": 5,
                                "value": [0, 1, 0]
                            },{
                                "time": 70,
                                "value": [0, -1, 0]
                            },{
                                "time": 80,
                                "value": [0, -1, 0]
                            },{
                                "time": 145,
                                "value": [0, 1, 0]
                            },{
                                "time": 150,
                                "value": [0, 1, 0]
                            }],
                            "name": ".position"
                        }]
                    }
                }
            ];

            viewer.load_scene_from_json(scene_json);

            var mixer = new MeshCat.THREE.AnimationMixer(viewer.scene);
            for (let animation of animations) {
                console.log("animation:", animation);
                let target = viewer.scene_tree.find(animation.path).object;
                let clip = loader.parseAnimations([animation.clip])[0];
                let action = mixer.clipAction(clip, target);
                action.play();
            }

            var clock = new MeshCat.THREE.Clock();

            function animate() {
                requestAnimationFrame( animate );
                render();
            }

            function render() {
                var delta = 0.75 * clock.getDelta();
                mixer.update( delta );
                viewer.render();
            }
            animate();

        </script>


         <style>
            body {
                margin: 0;
            }

            #meshcat-pane {
                width: 100vw;
                height: 100vh;
                overflow: hidden;
            }
        </style>
        <script id="embedded-json"></script>
	</body>
</html>
